


{% extends "base.html" %}

{% load static %}

{% load wagtailcore_tags wagtailimages_tags %}

{% block body_class %}template-publication-homepage{% endblock %}

{% block body_style %}padding-top: 105px; {% endblock %}


{% block content %}

<ul>
    <li >
      <a href="{{ page.url }}?pub_type=0" >
      <span class="hidden-xs">Patent</span></a>
    </li>
    <li >
      <a href="{{ page.url }}?pub_type=1" >
      <span class="hidden-xs">Conference Publication</span></a>
    </li>
    <li >
      <a href="{{ page.url }}?pub_type=2" >
      <span class="hidden-xs">Journal Publication</span></a>
    </li>
    <li >
      <a href="{{ page.url }}?pub_type=3" >
      <span class="hidden-xs">Books</span></a>
    </li>
    <li >
      <a href="{{ page.url }}?pub_type=4" >
      <span class="hidden-xs">Book Chapters</span></a>
    </li>
    <li >
      <a href="{{ page.url }}?pub_type=5" >
      <span class="hidden-xs">Poster</span></a>
    </li>

</ul>

<ul>
   {% for year in year_list %}
    <button class="{% if current_year %}class='active'{% endif %}" onclick="filterSelection('year_{{ year }}')">{{ year }}</button>
<!--     <li >
      <a href="#abc{{ year }}" >
      <span class="hidden-xs">{{ year }}</span></a>
    </li> -->
    {% endfor %}
    <button class="{% if current_year %}class='active'{% endif %}" onclick="filterSelection('all')">All</button>
</ul>


<ul id="myUL">
  {% for publication in pub_list %}
    <li class="filterDiv" id="year_{{ publication.pub_year|date:'Y' }}">
      <h2> {{ publication.specific.pub_type }}<a href="{{ publication.url }}">{{ publication.specific.name }}</a></h2>

      {% if publication.specific.faculty.all.count > 0 or publication.specific.students.all.count > 0 or publication.specific.other_authors.all.count > 0  %}
        <h3>Team</h3>
        <ul>
          {% for faculty in publication.specific.faculty.all %}
            <li>
            <a href="{{ faculty.faculty.url }}">{{ faculty.faculty }}</a>
            </li>
          {% endfor %}
          {% for student in publication.specific.students.all %}
            <li>
            <a href="{{ student.student.url }}">{{ student.student }}</a>
            </li>
          {% endfor %}
        </ul>
      {% elif publication.specific.alt_people_text  %}
        <h3>Team</h3>
        <div>{{ publication.specific.alt_people_text }}</div>
      {% endif %}
    </li>
  {% endfor %}
</ul>





{% endblock %}


{% block extra_script %}
<script type="text/javascript">
filterSelection("all")
function filterSelection(c) {
  var x, i,ul;
  ul = document.getElementById("myUL");
  x = ul.getElementsByClassName("filterDiv");
  if (c == "all") c = "";
  for (i = 0; i < x.length; i++) {
    if(x.id !== "year_"+c ){
      x[i].style.display = 'none';
    }
    else{
      x[i].style.display = 'inline';
    }
  }
}


// Add active class to the current button (highlight it)
var btnContainer = document.getElementById("myBtnContainer");
var btns = btnContainer.getElementsByClassName("btn");
for (var i = 0; i < btns.length; i++) {
  btns[i].addEventListener("click", function(){
    var current = document.getElementsByClassName("active");
    current[0].className = current[0].className.replace(" active", "");
    this.className += " active";
  });
}
</script>
{% endblock %}
