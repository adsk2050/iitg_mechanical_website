{% extends "base.html" %}

{% load wagtailcore_tags wagtailimages_tags %}

{% block body_class %}template-event-homepage{% endblock %}

{% block content %}
<div class="container">
  <h1>{{ page.title }}</h1>

       <!-- {% if tag %}
           <div class="row">
               <div class="col-md-12">
                   <p>Viewing all blog posts by <span class="outline">{{ tag }}</span></p>
               </div>
           </div>
       {% endif %}

       {% if page.get_child_tags %}
           <ul class="blog-tags tags list-inline">
               {% for tag in page.get_child_tags %}
                   <li><a href="{{ tag.url }}">{{ tag }}</a></li>
               {% endfor %}
           </ul>
       {% endif %} -->

       <div class="row row-eq-height blog-list">
           {% if event_list.number %}

           {% if event_list.number == 1 %}
             <li class="col-xs-12 col-sm-6 col-md-3 blog-list-item">
               <a href="{% pageurl page.featured_event %}">
                   <div class="image">
                       {% image page.featured_event.specific.poster fill-850x450-c50 as image %}
                       <img src="{{ image.url }}" width="{{ image.width }}" height="{{ image.height }}" alt="{{ image.alt }}" class="" />
                   </div>
                   <div class="text">
                       <h2 class="blog-list-title">{{ page.featured_event.specific.event_name }}</h2>
                       <p>{{ page.featured_event.specific.event_type|truncatewords:15 }}</p>
                   </div>
                   <div class="small footer">
                       {% if page.featured_event.specific.start_date %}
                           {{ page.featured_event.specific.start_date }} to
                       {% endif %}
                       {% if page.featured_event.specific.end_date %}
                           {{ page.featured_event.specific.end_date }} at
                       {% endif %}
                       {% if page.featured_event.specific.venue %}
                           {{ page.featured_event.specific.venue }}
                       {% endif %}

                   </div>
               </a>
             </li>
           {% endif %}
               {% for event in event_list %}
                   <li class="col-xs-12 col-sm-6 col-md-3 blog-list-item">
                       <a href="{{ event.url }}">
                           <div class="image">
                               {% image event.specific.poster fill-850x450 %}
                           </div>
                           <div class="text">
                               <h2 class="blog-list-title">{{ event.specific.event_name }}</h2>
                               <p>{{ event.specific.event_type|truncatewords:15 }}</p>
                           </div>
                           <div class="small footer">
                               {% if event.specific.start_date %}
                                   {{ event.specific.start_date }} to
                               {% endif %}
                               {% if event.specific.end_date %}
                                   {{ event.specific.end_date }} at
                               {% endif %}
                               {% if event.specific.venue %}
                                   {{ event.specific.venue }}
                               {% endif %}

                               <!-- {% for author in blog.authors %}
                                   {{ author }}{% if not forloop.last %}, {% endif %}
                               {% endfor %} -->
                           </div>
                       </a>
                   </li>
               {% endfor %}
           {% else %}
               <div class="col-md-12">
                   <p>Events are Being Organised. HANG ON for updates.</p>
               </div>
           {% endif %}
           <hr>
           <div class="pagination">
               <span class="step-links">
                   {% if event_list.has_previous %}
                       <a href="?page=1">&laquo; first</a>
                       <a href="?page={{ event_list.previous_page_number }}">previous</a>
                   {% endif %}

                   <span class="current">
                       Page {{ event_list.number }} of {{ event_list.paginator.num_pages }}.
                   </span>

                   {% if event_list.has_next %}
                       <a href="?page={{ event_list.next_page_number }}">next</a>
                       <a href="?page={{ event_list.paginator.num_pages }}">last &raquo;</a>
                   {% endif %}
           </div>
   </div>
{% endblock content %}
