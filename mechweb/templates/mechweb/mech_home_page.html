{% extends "base.html" %}
{% load static %}

{% load wagtailcore_tags wagtailimages_tags %}

{% block extra_css %}

<style>
  .rotateimage {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 150px;
    height: 150px;
    margin:-60px 0 0 -60px;
    -webkit-animation:spin 3s linear infinite;
    -moz-animation:spin 3s linear infinite;
    animation:spin 3s linear infinite;
}
@-moz-keyframes spin { 100% { -moz-transform: rotate(360deg); } }
@-webkit-keyframes spin { 100% { -webkit-transform: rotate(360deg); } }
@keyframes spin { 100% { -webkit-transform: rotate(360deg); transform:rotate(360deg); } }

.loaderback{
  position: fixed;
  left: 0%;
  top: 0%;
  background: #fff;
  width: 100%;
  height: 100vh;
  z-index: 99999;
}

.loading {
  position: fixed;
  left: 50%;
  top: 50%;
  margin: -35px 0 0 -56px;
  width: 112px;
  height: 70px;
  *zoom: 1;
  background: #fff;
}
.loading:before,
.loading:after {
  display: table;
  content: "";
}
.loading:after {
  clear: both;
}
.stage {
padding:40px;
text-align:center;}
.stage a {
  line-height:1em;
  letter-spacing:0.06em;
  font-family: 'Lato', sans-serif;
  font-weight:normal;
  font-size:16px;
  text-decoration:none;
  color:#fff;
  background:#231f20;
  display:inline-block;
  padding:15px 12px 15px 15px;
  transition:background 200ms;
  border-radius:4px;
}
.stage a:hover {
  background:#61a5c2;
  color:#000;
}
.stage a:after {
  font-family: 'FontAwesome', sans-serif;
  font-weight:300;
  content: "\f105";
  margin-left:20px;
  color:#fff;
  font-size:18px;
  vertical-align:middle;
  transition:color 200ms;
}

.stage a:hover:after {
  color:#000;
}
</style>

{% endblock %}


{% block content %}
    <!-- Preloader -->
    <div class="loaderback">
        <div class="loading">
            <img class="rotateimage" height="100px" width="100px" src="{% static "images/logo.png" %}" >
        </div>
    </div>
    <!-- Preloader End -->

    <div class="bd-example row d-flex justify-content-center">
    {% if page.yt_video_code %}
    
      <div class="col-sm-12 col-md-7">
        <div id="carouselslider" class="carousel slide" data-ride="carousel">
            <ul class="carousel-indicators">
                {% for photo in page.gallery_images.all %}
                <li data-target="#carouselslider" data-slide-to="{{ forloop.counter0 }}" class="{% if forloop.counter0 == 0 %}active{% endif %}"></li>
                {% endfor %}
            </ul>
            <div class="carousel-inner">
                {% for photo in page.gallery_images.all %}
                {% image photo.photo original as tmp_photo %}
                <div class="carousel-item {% if forloop.counter == 1 %}active{% endif %}">
                    <img src="{{ tmp_photo.url }}" class="d-block w-100" alt="...">
                    <div class="carousel-caption">{{ photo.caption }}</div>
                </div>
                {% endfor %}
                <a class="carousel-control-prev" href="#carouselslider" role="button" data-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="sr-only">Previous</span>
                </a>
                <a class="carousel-control-next" href="#carouselslider" role="button" data-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="sr-only">Next</span>
                </a>
            </div>
        </div>
      </div>
      <div class="col-sm-12 col-md-5">
        <div class="yt-video-div">
            <iframe id="yt-video-frame" class="yt-video" src="https://www.youtube-nocookie.com/embed/{{page.yt_video_code}}?modestbranding=1" frameborder="0" allowfullscreen></iframe>
        </div>
      </div>
    {% else %}
    <div class="col-sm-12 col-md-8">
        <div id="carouselslider" class="carousel slide" data-ride="carousel">
            <ul class="carousel-indicators">
                {% for photo in page.gallery_images.all %}
                <li data-target="#carouselslider" data-slide-to="{{ forloop.counter0 }}" class="{% if forloop.counter0 == 0 %}active{% endif %}"></li>
                {% endfor %}
            </ul>
            <div class="carousel-inner">
                {% for photo in page.gallery_images.all %}
                {% image photo.photo original as tmp_photo %}
                <div class="carousel-item {% if forloop.counter == 1 %}active{% endif %}">
                    <img src="{{ tmp_photo.url }}" class="d-block w-100" alt="...">
                    <div class="carousel-caption">{{ photo.caption }}</div>
                </div>
                {% endfor %}
                <a class="carousel-control-prev" href="#carouselslider" role="button" data-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="sr-only">Previous</span>
                </a>
                <a class="carousel-control-next" href="#carouselslider" role="button" data-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="sr-only">Next</span>
                </a>
            </div>
        </div>
    </div>
    {% endif %}
    </div>
    <!-- Split screen Code starts -->
    <div class="container-fluid newscontainer p-sm-0  pl-md-5">
        <div class="row padding d-flex justify-content-between">
            <div class="col-sm-12 col-xs-12 col-md-4 promo">
                <figure>
                    <img height="100px" width="100px" src="{% static "images/img2.jpg" %}">
                </figure>
        	   
	     <div class="promo-text" >
                    <h3>About ME,IITG</h3>
        	<br>        
	    <p  class=""style="text-align: justify;text-justify: inter-word">{{ page.intro }}</p>
                    <p class="">
                      {% for child in navlist %}
                       {% with page_type=child.content_type.name %}
                        {% if page_type == 'aboutiitgmech' %}
                        <div class="stage">
                        <a class="button" href="{{ child.url }}">Read More</a>
                        </div>
                        {% endif %}
                       {% endwith %}
                      {% endfor %}
                    </p>
                </div>
            </div>
            

           
            <div class="col-sm-12 col-xs-12 col-md-8 p-sm-0 px-md-5 newsbox">
                <div class="tab">
                    <button class="tablinks text-center "  onclick="openCity(event, 'News')">News</button>
                    <button class="tablinks text-center "  onclick="openCity(event, 'Announcements')">Announcements</button>
                    <button class="tablinks text-center "  onclick="openCity(event, 'Events')">Events</button>
                    <!-- <button class="tablinks text-center" onclick="openCity(event, 'Others')">Others</button> -->
                </div>
                <div id="News" class="tabcontent">
		    <div class="container" style="text-align: center">News</div>
                    {% for notification in news_annncmnts %}
                    {% if notification.info_type == "0" %}
                    <div class="container">
                        <div class="card" style="margin: 5px 0;">
                            <div class="row">
                                <div class="col-md-12" style="padding:2px 25px;">
                                    <div class="card-block text-center">
                                        <h4 class="card-title "style="font-size: 1.2em">{{ notification.heading }}</h4>
                                        <p class="card-text">
                                            Date:{{ notification.date }}
                                            <br>
                                            {{ notification.description|richtext }}
                                        </p>
                                    </div>
                                </div>
                                <div class="col-md-2">
                                    <!-- <div class="card-img-bottom">
                                    </div> -->
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endif %}
                    {% endfor %}
                    {% for award in top_awards %}
                    <div class="container">
                        <div class="card" style="margin: 5px 0;">
                            <div class="row">
                                <div class="col-md-12" style="padding:2px 25px;">
                                    <div class="card-block text-center">
                                      <!-- <h4 class="card-title "style="font-size: 1.2em">Achievement!</h4> -->
                                      <p>
                                          {{ award.award_title }}({{ award.get_award_type_display }}) awarded to {{ award.faculty }} by {{ award.conferrer }} {{ award.title }}
                                      </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
                <div id="Announcements" class="tabcontent">
                <div class="container" style="text-align: center">Announcements</div>
                {% for notification in news_annncmnts %}
                        {% if notification.info_type == "1" %}
                            <div class="container">
                                <div class="card" style="margin: 5px 0;">
                                    <div class="row">
                                        <div class="col-md-12" style="padding:2px 25px;">
                                            <div class="card-block text-center">
                                                <h4 class="card-title "style="font-size: 1.2em">{{ notification.heading }}</h4>
                                                <p class="card-text">
                                                    Date:{{ notification.date }}
                                                    <br>
                                                    {{ notification.description|richtext }}
                                                </p>
                                            </div>
                                        </div>
                                        <div class="col-md-2">
                                        <!-- <div class="card-img-bottom">

                                        </div> -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                        {% endif %}
                        {% endfor %}
                </div>
                <div id="Events" class="tabcontent">
                <div class="container" style="text-align: center">Events</div>
		{% for event in new_events %}
                    <div class="container">
                        <a href="{{ event.url }}">
                            <div class="card" style="margin: 5px 0;">
                                <div class="row">
                                    <div class="col-md-12" style="padding:2px 25px;">
                                        <div class="card-block text-center">
                                            <h4 class="card-title " style="font-size: 1.2em">{{ event.event_name }} [{{ event.get_event_type_display }}]</h4>
                                            <p class="card-text">
                                                From:{{ event.start_date }} To: {{ event.end_date }} at {{ event.get_venue_display }}
                                            </p>
                                        </div>
                                    </div>
                                    <div class="col-md-2">
                                        <!-- <div class="card-img-bottom">
                                        </div> -->
                                    </div>
                                </div>
                            </div>
                        </a>
                    </div>
                {% endfor %}
                </div>
            </div>

            <div class="col-sm-12 col-md-0">
            {% if page.yt_video_code %}
              <div class="yt-video-div2">
                <iframe class="yt-video2" src="https://www.youtube-nocookie.com/embed/{{page.yt_video_code}}?modestbranding=1&showinfo=0&fs=0" frameborder="0" allowfullscreen></iframe>
              </div>
            {% endif %}
            </div>
        </div>
    </div>

    <div class="w3-row w3-center w3-padding-16" style="background: linear-gradient(190deg, #222546 0%,#5085A5 100%);">
        <div class="w3-quarter w3-section" style="color: #fff">
            <span class="w3-xlarge">45+</span><br>
            <span class="w3-xlarge">Faculty</span>
        </div>
        <div class="w3-quarter w3-section" style="color: #fff">
            <span class="w3-xlarge">900+</span><br>
            <span class="w3-xlarge">Students</span>
        </div>
        <div class="w3-quarter w3-section" style="color: #fff">
            <span class="w3-xlarge">25+</span><br>
            <span class="w3-xlarge">Laboratories</span>
        </div>
        <div class="w3-quarter w3-section" style="color: #fff">
            <span class="w3-xlarge">25 Years</span><br>
            <span class="w3-xlarge">Legacy</span>
        </div>
    </div>
    <!-- split screen code ends -->
    <!-- /* table for research area showcase */ -->
    <div class="container-fluid" style="margin-bottom: 5px;margin-top:30px">
        <div class="row">
            <div class="col">
                <div class="section-header">
                    <h2 style="font-weight:bolder">Research Areas</h2>
                </div>
            </div>
        </div>
        <div class="w3-row w3-padding-16">
            {% for category in categories %}
            {% if category.category != '0' %}
            <div class="w3-third">
                <div class="single-service">
                    <div class="service-bg">
                        {% image category.specific.photo original style='width:100%; height:100%; object-fit: contain' %}
                        <h2><a href="{% url 'wagtail_serve' '' %}faculty?cat={{ category.category }}">{{ category.title }}</a></h2>
                    </div>
                    <div class="service-text sidebar-box" style="text-align: justify;text-justify: inter-word;">
                        <p>{{ category.specific.intro|richtext }}</p>
                    </div>
                </div>
            </div>
            {% endif %}
            {% endfor %}
        </div>
    </div>
     <!-- end of research categories row -->
    <div class="w3-padding-64 messagebox">
      <div class="w3-row-padding">
        <div class="w3-col l4 m6">
          <span style="display: block; text-align: center">
            {% if page.specific.HOD_image %}
              {% image page.specific.HOD_image original as photo %}
              <img class="w3-image w3-round-large w3-hide-small" src="{{ photo.url }}" alt="{{ photo.alt }}" style="align-items: center; width:17em; height:20em; margin-top: 2em "   />
            {% else %}
                {% with MEDIA_URL|add:'images/placeholder.jpg' as image_static %}
                    <img class="w3-image w3-round-large w3-hide-small w3-grayscale" src="{{ image_static }}" alt="placeholder" width="335" height="471" />
                {% endwith %}
            {% endif %}
          </span>
        </div>

          <!-- <h1 class="w3-xxxlarge w3-text-red"><b>Pixels, who?</b></h1> -->
          <div class="w3-col l8 m6">
          {% if page.specific.HOD_message %}
          <h1 class="w3-xxlarge" style="color: #ffffff" ><b>From HOD's Desk</b></h1>
          <p class="w3-xlarge">{{ page.specific.HOD_message|richtext }}</p>
            {% endif %}
          <!-- <p class="read-more"> <a href="{{ hod_url }}" class="btn-area button">Read more.. <i class="
            fa fa-long-arrow-right"></i>
          </a>
          </p> -->
          <br><br>
          <div class="" style="display:block; text-align:right">
            <strong style="text-align: right; padding-right:40px;" >{{ hod_name }}</strong><br>
            <strong style="text-align: right; padding-right:40px;">HOD, Department of Mechanical Engineering</strong>
          </div>

        </div>
      </div>
    </div>

    <!-- button colour change -->
    <!-- <script>
    // Add active class to the current button (highlight it)
    var header = document.getElementById("myDIV");
    var btns = header.getElementsByClassName("btn");
    for (var i = 0; i < btns.length; i++) {
      btns[i].addEventListener("click", function() {
      var current = document.getElementsByClassName("active");
      current[0].className = current[0].className.replace(" active", "");
      this.className += " active";
      });
    }
    </script> -->
{% endblock %}

{% block extra_script %}
<script>

function openCity(evt, cityName) {
  // Declare all variables
  var i, tabcontent, tablinks;

  // Get all elements with class="tabcontent" and hide them
  tabcontent = document.getElementsByClassName("tabcontent");
  for (i = 0; i < tabcontent.length; i++) {
    tabcontent[i].style.display = "none";
  }

  // Get all elements with class="tablinks" and remove the class "active"
  tablinks = document.getElementsByClassName("tablinks");
  for (i = 0; i < tablinks.length; i++) {
    tablinks[i].className = tablinks[i].className.replace(" active", "");
  }

  // Show the current tab, and add an "active" class to the link that opened the tab
  document.getElementById(cityName).style.display = "block";
  evt.currentTarget.className += " active";
}


$(document).ready( function() { //when the document is ready
  $(".loaderback").fadeOut("fast"); //fade out preloader. You can add your custom effects here too.
});



</script>

{% endblock %}
